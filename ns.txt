# Switch kubectl namespace trong context hi·ªán t·∫°i
kns() {
  local namespace namespaces ns_length current_context

  current_context=$(kubectl config current-context 2>/dev/null)
  if [ -z "$current_context" ]; then
    echo "‚ùå Ch∆∞a c√≥ context n√†o ƒëang ƒë∆∞·ª£c ch·ªçn."
    return 1
  fi

  namespaces=$(kubectl get ns --no-headers -o custom-columns=":metadata.name")
  ns_length=$(echo "$namespaces" | wc -l | xargs)

  if [ "$ns_length" -eq 0 ]; then
    echo "‚ùå Kh√¥ng t√¨m th·∫•y namespace n√†o."
    return 1
  elif [ "$ns_length" -eq 1 ]; then
    namespace="$namespaces"
  else
    if command -v fzf >/dev/null 2>&1; then
      namespace=$(echo "$namespaces" | fzf)
    else
      echo "C√≥ nhi·ªÅu namespace, h√£y ch·ªçn:"
      select namespace in $namespaces; do
        break
      done
    fi
  fi

  if [ -n "$namespace" ]; then
    echo "üëâ Switching namespace to: $namespace (context: $current_context)"
    kubectl config set-context "$current_context" --namespace="$namespace" >/dev/null
  else
    echo "‚ùå Kh√¥ng ch·ªçn namespace n√†o."
  fi
}

